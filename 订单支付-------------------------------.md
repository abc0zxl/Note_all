# 用户下单，订单支付

## 这里是基于一个外卖系统的用户下单的业务场景

**业务流程**：

1.商品首先放入购物车中，

2.在购物车中结算，

* 同时选择配送地址
* 完成订单支付
* ![image.png](/assets/249b5a8f-5744-498a-bbc5-d1ac292ffbb4.png)
* 清空购物车
* 跳转到下单成功界面
* ![image.png](/assets/11bbed50-6154-43e8-9c87-eca223c30b06.png)

3.这个订单就是发给商家的通知，以继产生相关的订单数据，就是平时看到的外卖单条

* 准备菜品准备发货

![image.png](/assets/45e92a24-c3ab-4353-a962-9f83ea6e0524.png)






## 订单数据库设计

![image.png](/assets/1fc1e66e-58b3-47ec-a6fe-46fe7a07db47.png)

### 订单表

![image.png](/assets/a47ce0df-a8aa-4915-a2ee-b9a13293f914.png)  

### 订单明细表

![image.png](/assets/531c470b-f40b-403b-99b5-ede4669931c5.png)

### 发送给前端的订单

![image.png](/assets/4f24eda6-d5ce-482e-a763-6c5faf9e3582.png)


## Service层的主要任务

**实现步骤**

--------判断:地址是否为空

1.向订单插入一条数据


2.向订单明细表中插入多条数据（因为是多个菜品）

3.清空当前购物车

4.封装vo返回结果
