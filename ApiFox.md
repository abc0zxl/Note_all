# 解决问题

1.**apifox参数中的缺少的标签**，在类型后面有一个调节图标这里

![image.png](/assets/ab05cb3e-ccb4-48ce-826d-3ac460af8897.png)

![image.png](/assets/d0bbd6b8-28b8-4daf-9b8e-95f3b902a2de.png)

# API文档示例

1.**apifox文件夹示例**

![image.png](/assets/8a1be9c6-cad3-483a-ab11-d261256dc6e4.png)

## 返回响应

在设计接口时需要返回响应，而响应的数据结构需要自己定义。

1.**定义返回响应的数据结构**：在apifox左边的**组件库中**，里面有一个**默认响应模板**，在这里就可以设置全局的返回响应的数据结构

2.**为什么要自己设定**：因为有的公司的响应结构不一样

## 引用模型

在界面的左侧数据模型，他就是可以存放各种

**公共**数据对象，用于日常引用

1.**使用方法**：在编写参数类型时，在选类型的时候就会出现**引用模型**，就会将这个数据对象嵌入到这个Object对象中去

## 响应示例

因为完整的API文档需要**响应示例**，在编写接口的时候滑到最下面就会有**添加示例**这个按钮

![image.png](/assets/8f3ce722-c655-4825-9197-dc8f156cb827.png)

## 自动生成响应数据结构

#### 通过json自动生成

如果没定义好**引用模型**，在**返回响应下面**，有一个**通过JSON等生成**，

![image.png](/assets/c4f1d972-a296-4d02-bc61-3cf8e85263ec.png)

比如如果有实际要返回的json数据了，就可以直接将这个json数据粘贴到里面，就会自动生成类型

![image.png](/assets/fd092925-fa8f-497e-abfb-ad1bba9fd19e.png)

#### 通过连接数据库表，sql语句生成

连接数据库后可以导入数据库中的数据类型结构

1.**连接数据库**

![image.png](/assets/536d05eb-dfa6-4b3f-88b1-6d05708a94ca.png)

2.**从数据库导入数据**

![image.png](/assets/6a420d0e-57a7-4ad9-9fd1-ea6a7f8feb7b.png)

3.**也可以通过sql语句DDL（Data Definition Language）**

在上图的右边按钮就是

## 响应组件

这个就是返回响应的时候的**返回码**

![image.png](http://asset.localhost/C%3A%5CUsers%5CZhuanZ1%5CAppData%5CRoaming%5Ccom.codexu.NoteGen%2Farticle%2F%2Fassets%2F0b187281-b859-4c2f-bd2d-586a908720e4.png)

1.**设置响应码**

在apifox左边的**组件库**->**响应组件**里面

![image.png](/assets/8f7d6c42-a95b-4dda-832d-4a7fcf4b59ce.png)

## 自动生成API文档

1.**swwager辅助**

swwager可以自动生成API文档，apifox可以在**数据管理的导入数据中**，写入swwager的url，设置导入间隔时间，自动导入

2.**Idea的ApiFox插件**

这个直接就能自动导入代码中的存在接口，自动在界面中生成api文档

## 生成java后端代码

在**接口**文件夹位置，左边有**三个点**，点击就会有生成业务代码的功能

![image.png](/assets/aacc6357-cb1d-40c9-ad18-8d8068cf1ee8.png)

## 自动生成测试数据

在测试接口的时候，postman需要给参数提供具体的值，而apifox可以直接根据设置的参数来生成对应的值，

1.这个设定的值的方法和种类非常多

## 可以自动报错

如果后端的返回结果和**设定的响应**有差别，就会报错，同时还会返回，**响应时间**

![image.png](/assets/e5387e7b-8b26-4c4b-9ef0-e6edeb9b1bf4.png)

## 可以操作数据库

![image.png](/assets/a18ffef7-7116-4261-98bd-5ee1e27cad8e.png)

## 可以完全适应postman的脚本

## 保存测试的案例

可以将测试案例的保存到这个接口目录下方

![image.png](/assets/b6747fd2-a70d-4c25-bbe8-633ec70c2533.png)

# 自动化测试接口

想要连续的运行多个接口的时候就可以用apifox

1.**点击左侧的自动化测试**

2.**新建测试场景**

3.**添加步骤**：可以选择通过接口导入

4.**就能看到接口测试成功数量**：可以直接定位问题

## 自动化测试接口的数据调试

![image.png](/assets/e2be3ff1-5813-4f0c-9f19-c2d1790bd6e3.png)

因为有些接口他需要基于某些接口操作的数据才能凑齐接口数据，例如查询地址，他就需要用到登录接口的用户id。

1.**添加前置步骤的运行结果**

![image.png](/assets/f6e78546-d830-4b7f-9170-2bb614ad740f.png)

2.**用循环测试模拟多个数据的插入（购物车）**

![image.png](/assets/a894a69e-a61a-4395-9576-c78bb5e77565.png)

# 分享这个apifox文档

1.**点击在线分享**

2.**添加分享标题**

3.**然后就能通过连接来访问这个接口文档**

## 接口鉴权的使用

由于服务器某些数据不想被访问到，于时只给了特定的用户权限来访问，接口鉴权他是用于鉴定用户是否有访问数据的权限。

![image.png](/assets/ee1094d2-a625-45c9-9da6-3499657a690b.png)

apifox的**鉴权组件**中**设置了authorization后**，在接口的Auth选项下的鉴权方式添加了这个鉴权组件，这样这个authorization算是嵌入到了header当中

# ApiFox编写文档使用方法

描述一个项目的开始到结束，apifox的协作流程

1.**设计阶段**

* 更具需求文档，讨论，确定接口设计思路
* **接口设计者**，在Apifox上定好接口文档初稿
* **接口评审环节**：前后端一起评审，完善接口文档，定好接口用例

2.**开发阶段**

* **前端**：Apifox会更具接口文档自动生成Mock数据，直接可以镜像开发，**无需手写mock规则**
* **后端**：使用Apifox调试接口，**保存接口用例**
* **测试**：直接用后端调试时保存的用例**生成测试用例**

3.**联调和测试阶段**

# 团队协作流程

1.**新建团队**

2.**设置项目**

3.**要求成员加入**

# 分享文档
