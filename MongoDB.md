# MongoDB

是一种服务器和数据库之间的一个中间层，数据结构灵活的mysql


## 主要优点

1.**Bson替代Json**

2.**写时复制机制**

3.**cache读写**

4.**写前日志，checkpint保持数据持久化**

**应用场景**：

* 数据库表中有大量的标签，但是很多用户用不上，导致浪费大量空间。

**原理**：将那些原来每个用户都有的标签，但是用不上浪费空间的标签。运用一种向json的数据结构来存储，没用到的字段就不用，这一个个json数据称之为**文档**

**特点**：

* 不用提前定义表结构
* 一条数据称之为**文档**
* 这些文档的结合叫做**集合**
* 是一个用于读写文档的服务进程
* 他的查询语句和mysql区别比较大
* 原来的json只支持**数字，字符串**交互存储时还需要编码，不够高效
* 它实现了**Bson**，可以实现二进制存储，高效读写
* 实现了.wt文件，存储的是一个个集合

这个.wt文件的结构，实现了像磁盘里一页一页的结构，实现了高效存取

* 数据页查找.wt文件的方式，加速了查找
* 实现了copy on write

Mysql的写操作，会对内存暂锁，mongodb写数据时不会加锁，时读写性能更高


**高效的读写策略**

* 采用LRU存储再Cache中
* 为了防止丢失，会采用**文件缓存的方式**，内存崩溃，可以查找jurnal文件快速定位，恢复数据
* 支持批量写入**脏页**
*


## WiredTiger存储引擎

这个就是包含下面几个技术的总成


1.**Bson替代Json**

2.**写时复制机制**

3.**cache读写**

4.**写前日志，checkpint保持数据持久化**

1.**Bson替代Json**

2.**写时复制机制**

3.**cache读写**

4.**写前日志，checkpint保持数据持久化
