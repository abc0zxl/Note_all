# 用于文件上传

**实现步骤**：

1.**单独创建controller**：

2.**编写方法**：

* 返回类型是Result<String》,
* 参数是MultipartFile AAA
* MultipartFile类型，是处理http文件上传的核心接口，他封装了上传文件的所有消息，（**文件名，内容类型，大小，等**）

3.**编写方法内容**：

* 获取下载的文件名字

  String orginalFilename=AAA.getOriginalFilename();
* 将文件内容存到本地磁盘的方法f

  **第一步**：AAA.transferTo(new File("BBB")).这里BBB是下载的存放地址
* **拼接字符串**：在上面的地址后面用+拼接就行
* **抛出异常**
* **返回Result**

4.**优化存储**：防止覆盖文件

* **唯一文件名字**：接住UUID方法
* ![image.png](/assets/8dc1b7c8-5ae4-4b11-bd09-313cdc2a0083.png)
*

# 云存储——文件上传

SDK:软件开发工具包，辅助软件开发的依赖等。

## **准备工作**：

1.登录（阿里，百度，字节）

2.**充值**

3.**开通对象存储服务**

4.**创建bucket**：是存储空间，是用于存储对象的容器，所有对象都必须隶属于某个存储空间。操作详情可以参照黑马SpringBoot3+Vue3资料。

4.**获取密钥**：Accesskey，用于每次往云存储的请求时的密钥。

5.**观看这个云存储的官方文档**：查看环境要求，要导入的依赖等。

6.**导入他说的jar包到xml**：因为这里是用的maven，所以要导入到pom，如果是其他地方就用其他方法。

7.**就能实现oss存储了**：

## 存储代码编写

1.**去对应云存储的产品文档**：查找java上传的代码

![image.png](/assets/6a944b2f-113a-4ccc-bf26-52435c5f3e1e.png)

2.**修改代码的内容**：编写好配置信息即可

* 地域结点
* 修改accessKeyId
* 修改accessKeySecret
* bucketName名子
* 目前要存储的文件的名字

3.**创建OSSClient**：导入bucketName,keyId,keySecret

4.**修改上传地址和文件名字**：

5.**运行**

## 云存储代码工具化

由于这个文件编写繁琐，而且每次都要用。所以弄成一个工具类就会很好。

1.**创建工具类文件**：

2.**内部参数优化**：有几个参数是自己编写的重要字段，且不常修改，就用**静态常量**

……………………………………

## 直接用现成的工具类

AliOssUtil.java

1.**修改内部参数**

2.**调用上传的方法**：uploadFile(……)

导入两个参数

* 文件名
* 文件输入流

3.**获取下载url**：上面的上传方法执行后，会返回一个url，一访问就会下载这个文件。

### 以后还有更好的方法
