## 关系型数据库

Oracle,MySQL,IBM Db2,SQL Server,PostgreSQL

收费：Oracle,

免费：MySQL，PostgreSQL，

关系数据库是建立在关系模型上的数据库，多个数据库是相互连接的二维表连接成的数据库。主要**是因为他存储在表中**

**优点：**

1.数据存储在磁盘中，比较安全。

2.易于维护

## SQL语言

1.不区分大小写

2.以分号结尾

3.要空格隔开

#### 注释

**单行：**#

**多行**：“/**……*/”

### 类型

1.数值类型：tinyint，smallint，mediumint，int，intger，bignt，float，double

2.日期时间类型：data，time，year，datetime，timestamp

3.字符串类型：char，varchar，tinyblob，tinytext，blob，text，mediumblob，mediumtext，longblob，longtext


### 创建数据库模板

![image.png](/assets/bc4cfc11-d7ea-4278-a29b-72671d39d016.png)

#### 语句分类

**DDL**:数据库操作

**DML**：对数据库增删改

**DQL**:对数据库进行查询

**DCL**：对数据库进行权限控制

创建数据库

create database d_name character set gb2312 collect gb2312_ci;

判断存在语句

if exists d_name;

删除数据库

drop database d_nams;

进入数据库

use d_name;

查看数据库

select d_name;

**CRUD操作（create，）**

查表结构

desc t_name;

创建表

create table t_name(

```
名字    类型，
```

```
id int，
```

```
username varchar(20)
```

```
);
```

删除表

drop table t_name;

修改表名字

alter table t_name rename to t_n_name;

添加表一列

alter table  t_name add v_name v_type;

修改表某列数据类型

alter table t_name modify v_name v_n_type;

同时修改列名和类型

alter table t_nmae change v_name v_n_name v_n_type;

删除列

alter table t_name drop v_name;

插入表数据

insert into t_name(v_name1,v_name2……) values(x,x,……);

insert into t_name values

```
(x,x,x……),
```

```
(x,x,x……),
```

```
(x,x,x……),
```

```
(x,x,x……)……；
```

修改表的数据

update t_name set v_name="xxx" where v_name="xxxx";修改特定的行

update t_name set v_name="xxx";修改所有的行

delete from 表名 where 条件；如果没有条件，则这个表中所有数据都会消失。

### 查询

1.基础查询

2.条件查询where

3.分组查询group by

```
select 分组字段 from 表名 where(having) 条件 group by 分组列名
```

```
where:分组之前进行限定，不满足where（过滤），不参与分组
```

having：是对分组之后的结果进行过滤

4.排序查询order by

5.分页查询limit

select 字段列表 from 表名 limit 起始索引，查询条目；

### 约束

1.非空约束（NOT NULL）

```
表示某个列的值不能为空
```

2.唯一约束(UNIQUE)

```
表示列中的每个值各不相同
```

3.主键约束(PRIMARY KEY)

```
要遵循主键规则（非空，唯一）
```

4.检查约束(CHECK)

```
保证列中满足一定约束
```

5.默认约束(DEFAULT)

```
如果未指定值，则采用默认值
```

6.外键约束(FOREIGN KEY)

将两个表连接在一起，确保数据的一直性和完整性

**建表前**：constraint 外键名称 foreign key 主表；

**建表后**：alter table t_name add constraint 外键名称 foreign key 外键名称 references 主表名称。

外键删除，要删除主表外键表的列，必须要先删除，外键设置的那个列的全部成员

### 数据库设计

软件设计的步骤：

1.**需求分析**（产品经理）

设计出产品原型，一个仅有前端的模拟

2.**设计**（架构师，开发工程师）

软件架构的设计，数据库设计，接口设计，过程设计

3.**编码**（开发工程师）

4.**测试**

5.**安装部署**

#### 数据库工作：

1.选用什么DBMS？

2.表结构设计

3.表与表之间的关系关联过程

### 数据库设计步骤

1.需求分析：要哪些数据，数据属性，特点等等

2.逻辑分析：ER图，图像化工具

![image.png](/assets/f25d5892-a0c1-4f0e-80fb-92a5cb6755c5.png)

3.物理设计：创建表

4.维护设计 ：

### 数据库设计

1.一对一

2.一对多：一个表的列与另一个表的某行保持连接

3.多对多：需要一个中间表来辅助连接，至少要两个外键，用来关联对方主键

![image.png](/assets/7f4a0596-2bde-4480-a8c0-1b249cc5111d.png)

### 多表查询

如果不加约束的多表查询，会导致**笛卡尔积**，会列出所有可能的情况

#### 连接查询

**内连接：**

```
隐式：1.select 字段列表 from 表1，表2…… where 条件；
```

![image.png](/assets/05cb0216-4f84-4939-8fce-61acb9f6e990.png)

显式：2.select  字段列表 from 表1 inner join 表2 on条件；

![image.png](/assets/7c20f3c7-049b-4073-886c-bd65fc55c1a6.png)

##### 两者 区别

显式连接：他的**连接条件**和**过滤条件**是分离的，有比较高的可读性

隐式连接：他的缺少一些可读性

![image.png](/assets/fcb36f55-0917-4092-8209-11f89188eb1a.png)

![image.png](/assets/cfe5ea09-8b81-4186-a444-c8e29a21ce1d.png)

**左外连接**

表示连接查询时，有些映射关系，可能存在有一方数据缺失，左外连接，就是表示查询左表的所有数据，再加上右表的链接上的信息。

**右外连接**

这个也是一样的

**子查询**

表示这个查询的条件，他是一个查询语句替代的，也就是说是一个动态的条件。

1.单行单列

条件语句替换成查询语句，在查询语句中

![image.png](/assets/04c4e6a9-7141-41aa-ad00-be39abc84bba.png)

2.单行多列

表示一个表的多个条件，在in后面

![image.png](/assets/3855396c-090f-4f2c-8254-a0fe90a6847d.png)

3.多行多列

表示多个表的连接，在from后面

![image.png](/assets/96daf945-acee-4f55-b88b-c16d1facdac3.png)

## 事务

1.包含了一组数据库操作命令

2.要么同时成功，要么同时失败

3.是一个不可分割的工作逻辑单元

**开始事务**

start transaction 或者 begin;

**提交事务**

commit;默认是主动执行，可以通过@@autocommit来设置主动执行与否，可改成手动提交。

**回滚事务**

rollback;

### 事务的特性

1.原子性

2.一致性

3.隔离性

4.持久性
